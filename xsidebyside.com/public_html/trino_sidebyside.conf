<VirtualHost *:80>
    ServerName xsidebyside.com
    ServerAlias www.xsidebyside.com
    
    DocumentRoot /xsidebyside.com/public_html
    
    ErrorLog ${APACHE_LOG_DIR}/trino_sidebyside_error.log
    CustomLog ${APACHE_LOG_DIR}/trino_sidebyside_access.log combined
    
    # WSGI configuration
    WSGIDaemonProcess trino_sidebyside python-home=/xsidebyside.com/venv python-path=/xsidebyside.com/public_html
    WSGIProcessGroup trino_sidebyside
    WSGIScriptAlias / /xsidebyside.com/public_html/wsgi.py
    
    <Directory /xsidebyside.com/public_html>
        WSGIProcessGroup trino_sidebyside
        WSGIApplicationGroup %{GLOBAL}
        Require all granted
        
        # Enable .htaccess file processing
        AllowOverride All
        
        # Security Headers
        Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
        Header always set Content-Security-Policy "default-src 'self' https:; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https: data:;"
        Header always set X-Frame-Options "SAMEORIGIN"
        Header always set X-Content-Type-Options "nosniff"
        Header always set Referrer-Policy "strict-origin-when-cross-origin"
    </Directory>
    
    # Static files configuration
    Alias /static /xsidebyside.com/public_html/static
    
    <Directory /xsidebyside.com/public_html/static>
        Require all granted
    </Directory>
</VirtualHost>
